{% extends 'base.html' %}

{% block title %}Testing de Componentes{% endblock %}

{% block content %}
<h2>Test</h2>
<div id="carrousel-peliculas">
    <ul id="peliculas">
    </ul>
</div>
{% endblock %}

{% block scripts %}
<script>
    const API = "http://127.0.0.1:5000/api";

    async function cargarPeliculas() {
      const resp = await fetch(`${API}/peliculas`);
      const json = await resp.json();
      console.log("Respuesta:", json);
      
      const data = json.data;
      const lista = document.getElementById("peliculas");
      lista.innerHTML = "";
      data.forEach(p => {
        const li = document.createElement("li");
        li.textContent = `${p.titulo} (${p.anio})`;
        lista.appendChild(li);
      });
    }

    window.addEventListener("DOMContentLoaded", cargarPeliculas);
</script>
{% endblock %}
