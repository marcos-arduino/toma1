{% extends 'base.html' %} {% block title %}Película{% endblock %} {% block content %}
<h1>Detalles de la Película</h1>
<div id="pelicula" class="container mt-4 text-center">
    <h2 id="titulo"></h2>
    <img id="imagen" class="img-fluid mb-3" alt="Poster de la película" />
    <p id="descripcion" class="lead"></p>
    <p><strong>Fecha de lanzamiento:</strong> <span id="fecha"></span></p>
    <p><strong>Duración:</strong> <span id="duracion"></span> minutos</p>
    <p><strong>Géneros:</strong> <span id="generos"></span></p>
    <p><strong>Puntuación:</strong> <span id="puntuacion"></span></p>
</div>

<!-- con mantener los id alcanza, ejemplo: <span id="..."></span>, <hX id="titulo"></hX>. todo el resto se puede modificar libremente -->
<!-- cada cada contenido va dirigido a esos ids, creo que no importa que tipo de etiqueta sea -->
<!-- yo(ardui) sacaria los p strong , etc. lo haria de otra forma -->

{% endblock %} {% block scripts %}
<script>
    const API = "http://127.0.0.1:5000/api";
    const movieId = "{{ movie_id }}"; // Flask inserta el ID aquí

    async function cargarPelicula() {
        console.log("Ejecutando cargarPelicula()");
        try {
            const resp = await fetch(`${API}/peliculas/${movieId}`);
            const json = await resp.json();
            console.log("Respuesta:", json);

            if (json.status !== "success") {
                document.getElementById("pelicula").innerHTML = "<p class='text-danger'>Error al cargar la película.</p>";
                return;
            }

            const p = json.data;

            document.getElementById("titulo").textContent = p.title;
            document.getElementById("descripcion").textContent = p.overview;
            document.getElementById("fecha").textContent = p.release_date;
            document.getElementById("duracion").textContent = p.runtime;
            document.getElementById("generos").textContent = p.genres.join(", ");
            document.getElementById("puntuacion").textContent = p.vote_average;
            document.getElementById("imagen").src = p.imageUrl;
        } catch (err) {
            console.error("Error cargando película:", err);
        }
    }

    window.addEventListener("DOMContentLoaded", cargarPelicula);
</script>
{% endblock %}
